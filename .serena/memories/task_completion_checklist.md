# タスク完了時のチェックリスト

## コード実装後の必須チェック項目

### 1. コードフォーマット
- [ ] blackでフォーマット実行
- [ ] isortでインポート整理実行
- [ ] フォーマット後のコードを確認

### 2. リンティング
- [ ] ruffでリンティング実行
- [ ] 警告・エラーをすべて解消
- [ ] 未使用インポートの削除

### 3. 型チェック
- [ ] mypyで型チェック実行
- [ ] 型エラーをすべて解消
- [ ] 型ヒントの漏れがないか確認

### 4. テスト
- [ ] 新規機能に対するテストを作成
- [ ] 既存テストが全て通過することを確認
- [ ] カバレッジが低下していないか確認
- [ ] エッジケースのテストを追加

### 5. セキュリティ
- [ ] 機密情報がコード内にハードコーディングされていないか
- [ ] 環境変数を適切に使用しているか
- [ ] パスワードが平文で保存・ログ出力されていないか
- [ ] 入力バリデーションが適切に行われているか

### 6. ドキュメント
- [ ] Docstringが適切に記述されているか
- [ ] 複雑なロジックにコメントが付いているか
- [ ] APIエンドポイントの説明が更新されているか
- [ ] README.mdの更新が必要か確認

### 7. データベース
- [ ] マイグレーションファイルが正しく生成されているか
- [ ] マイグレーションの適用・ロールバックが正常に動作するか
- [ ] インデックスが適切に設定されているか

### 8. コミット前の最終確認
- [ ] 不要なデバッグコードの削除
- [ ] console.log / printデバッグの削除
- [ ] TODOコメントの確認と対応
- [ ] コミットメッセージの準備

## コマンド実行順序

```bash
# 1. フォーマット
black app/ tests/
isort app/ tests/

# 2. リンティング
ruff check app/ tests/

# 3. 型チェック
mypy app/

# 4. テスト
pytest

# 5. すべて成功したらコミット
git add .
git commit -m "type: description"
```

## エラー発生時の対応

### フォーマットエラー
- blackやisortのエラーは自動修正されるため、変更を確認してコミット

### リンティングエラー
- ruffのエラーメッセージを確認し、コードを修正
- `--fix` オプションで自動修正可能な場合もある

### 型チェックエラー
- mypyのエラーメッセージを確認し、型ヒントを追加・修正
- 外部ライブラリの型スタブが必要な場合はインストール

### テスト失敗
- 失敗したテストのログを確認
- 実装の不具合を修正、またはテストケースを修正
- カバレッジレポートで未カバー箇所を確認

## 特記事項

### UI/UXの変更禁止
- 明示的に指示されていないUI/UXの変更は行わない
- レイアウト、色、フォント、間隔などの変更は事前承認が必要

### 技術スタックのバージョン変更禁止
- ドキュメントに記載されたバージョンを勝手に変更しない
- 変更が必要な場合は理由を明確にして承認を得る

### 重複実装の防止
- 実装前に既存の類似機能を確認
- 共通処理は適切に抽出・再利用
